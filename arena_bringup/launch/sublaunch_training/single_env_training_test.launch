<launch>
    <arg name="ns" />

    <!-- Don't change it if you don't know what does it mean! -->
    <arg name="global_frame_id"   value="map"/>
    <arg name="odom_frame_id"     value="$(arg ns)_odom"/>
    <arg name="base_frame_id"     value="$(arg ns)_footprint"/>
    <arg name="model" default="burger"/>
    <arg name="agent_name" default="rule_05"/> 

    <!-- use fake localization-->
    <include file="$(find arena_bringup)/launch/sublaunch_training/fake_localization.launch">
      <arg name="ns"                value="$(arg ns)"/>
      <arg name="global_frame_id"   value="$(arg global_frame_id)"/>
      <arg name="odom_frame_id"     value="$(arg odom_frame_id)"/>
    </include>


    <!-- start time space plan fsm-->
    <!-- <include file="$(find arena_bringup)/launch/sublaunch_training/timed_space_planner_fsm.launch">
      <arg name="ns"                value="$(arg ns)"/>
    </include> -->

    <node pkg="move_base" type="move_base" respawn="false" name="move_base" output="screen">
      <arg name="ns"                value="$(arg ns)"/>
      <rosparam file="$(find conventional)/config/$(arg model)/costmap_common_params.yaml" command="load" ns="global_costmap" />
      <rosparam file="$(find conventional)/config/$(arg model)/costmap_common_params.yaml" command="load" ns="local_costmap" />   
      <rosparam file="$(find conventional)/config/$(arg model)/local_costmap_params.yaml" command="load" />
      <rosparam file="$(find conventional)/config/$(arg model)/global_costmap_params.yaml" command="load" />
    </node>

    <node name="DRL_local_planner" pkg="arena_local_planner_drl" type="drl_agent_node.py" args=["$(arg agent_name)", "$(arg ns)"] output="screen"/>
    
    <!-- use simulator and rviz-->
    <include file="$(find arena_bringup)/launch/sublaunch_training/flatland_simulator.launch">
        <arg name="ns" value="$(arg ns)"/>
    </include>

  </launch>